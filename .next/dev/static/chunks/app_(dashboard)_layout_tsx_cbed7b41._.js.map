{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/vs%20code/antigravity%20related%20test%20projects/react%20dashboard%20project/admin-dashboard-type2/app/%28dashboard%29/layout.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Layout, Menu, Button, Avatar, Typography, Space, Spin, Dropdown } from 'antd';\r\nimport {\r\n  DashboardOutlined,\r\n  UserOutlined,\r\n  SettingOutlined,\r\n  LogoutOutlined,\r\n  MenuUnfoldOutlined,\r\n  MenuFoldOutlined,\r\n  RocketOutlined,\r\n  ProfileOutlined\r\n} from '@ant-design/icons';\r\nimport { usePathname, useRouter } from 'next/navigation';\r\nimport Link from 'next/link';\r\n\r\nconst { Header, Sider, Content } = Layout;\r\nconst { Text, Title } = Typography;\r\n\r\nexport default function DashboardLayout({\r\n  children,\r\n}: {\r\n  children: React.ReactNode;\r\n}) {\r\n  const [collapsed, setCollapsed] = useState(false);\r\n  const [user, setUser] = useState<{ name: string; email: string; role: string } | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n\r\n  useEffect(() => {\r\n    async function fetchUser() {\r\n      try {\r\n        const res = await fetch('/api/auth/me');\r\n        if (res.ok) {\r\n          const data = await res.json();\r\n          setUser(data.user);\r\n        } else {\r\n           // If unauthorized, redirect to login\r\n           router.push('/login');\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to fetch user', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    fetchUser();\r\n  }, [router]);\r\n\r\n  const menuItems = [\r\n    {\r\n      key: '/admin', // Admin sees /admin, User sees /dashboard\r\n      icon: <DashboardOutlined />,\r\n      label: <Link href={user?.role === 'admin' ? '/admin' : '/dashboard'}>Dashboard</Link>, \r\n      className: `animate-fade-up delay-100 ${pathname === '/admin' || pathname === '/dashboard' ? 'glass-card' : ''}`,\r\n      style: { margin: '4px 0', borderRadius: 8 }\r\n    },\r\n\r\n    ...(user?.role === 'admin' ? [\r\n        {\r\n            key: '/admin/users',\r\n            icon: <UserOutlined />,\r\n            label: <Link href=\"/admin/users\">Users</Link>,\r\n            className: `animate-fade-up delay-200 ${pathname === '/admin/users' ? 'glass-card' : ''}`,\r\n            style: { margin: '4px 0', borderRadius: 8 }\r\n        },\r\n        {\r\n          key: '/settings',\r\n          icon: <SettingOutlined />,\r\n          label: <Link href=\"/settings\">Settings</Link>,\r\n          className: `animate-fade-up delay-300 ${pathname === '/settings' ? 'glass-card' : ''}`,\r\n          style: { margin: '4px 0', borderRadius: 8 }\r\n        }\r\n    ] : [])\r\n  ];\r\n\r\n  const handleMenuClick = ({ key }: { key: string }) => {\r\n      // Navigation is handled by Link component for SEO and prefetching\r\n      if (key && !key.startsWith('/')) return; // Avoid navigation for non-links\r\n      // router.push(key); // Not needed with Link\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    document.cookie = 'token=; Max-Age=0; path=/;';\r\n    router.push('/login');\r\n  };\r\n\r\n  const userMenu = {\r\n      items: [\r\n          {\r\n              key: 'logout',\r\n              label: 'Logout',\r\n              icon: <LogoutOutlined />,\r\n              onClick: handleLogout\r\n          }\r\n      ]\r\n  };\r\n\r\n  if (loading) {\r\n      return (\r\n          <div style={{ height: '100vh', display: 'flex', justifyContent: 'center', alignItems: 'center', background: '#111315' }}>\r\n              <Space orientation=\"vertical\" align=\"center\">\r\n                  <Spin size=\"large\" />\r\n                  <div style={{ color: '#6C5DD3', marginTop: 16, fontWeight: 500 }}>Loading Gatekeeper...</div>\r\n              </Space>\r\n          </div>\r\n      )\r\n  }\r\n\r\n  return (\r\n    <Layout style={{ minHeight: '100vh', background: 'transparent' }}>\r\n      <Sider \r\n        trigger={null} \r\n        collapsible \r\n        collapsed={collapsed} \r\n        width={250}\r\n        style={{ \r\n            background: 'transparent', \r\n            borderRight: '1px solid rgba(255, 255, 255, 0.08)',\r\n            position: 'fixed',\r\n            height: '100vh',\r\n            left: 0,\r\n            zIndex: 100\r\n        }}\r\n      >\r\n        <div style={{ \r\n            height: 80, \r\n            display: 'flex', \r\n            alignItems: 'center', \r\n            justifyContent: collapsed ? 'center' : 'flex-start', \r\n            padding: collapsed ? 0 : '0 24px',\r\n            borderBottom: '1px solid rgba(255, 255, 255, 0.08)'\r\n        }}>\r\n            <RocketOutlined style={{ fontSize: 24, color: '#8b5cf6' }} />\r\n            {!collapsed && (\r\n                <Title level={4} style={{ margin: '0 0 0 12px', color: 'white', fontWeight: 700, fontFamily: 'var(--font-outfit)' }}>\r\n                    Gatekeeper\r\n                </Title>\r\n            )}\r\n        </div>\r\n        <Menu\r\n          theme=\"dark\"\r\n          mode=\"inline\"\r\n          selectedKeys={[pathname]}\r\n          style={{ background: 'transparent', borderRight: 0, marginTop: 24 }}\r\n          items={menuItems}\r\n          onClick={handleMenuClick}\r\n        />\r\n        <div style={{ position: 'absolute', bottom: 24, width: '100%', padding: '0 24px' }}>\r\n            {!collapsed ? (\r\n                <Button \r\n                    type=\"text\" \r\n                    icon={<LogoutOutlined />} \r\n                    onClick={handleLogout}\r\n                    style={{ color: '#a1a1aa', width: '100%', textAlign: 'left', paddingLeft: 0 }}\r\n                >\r\n                    Logout\r\n                </Button>\r\n            ) : (\r\n                <Button \r\n                    type=\"text\" \r\n                    icon={<LogoutOutlined />} \r\n                    onClick={handleLogout}\r\n                    style={{ color: '#a1a1aa', width: '100%', display: 'flex', justifyContent: 'center' }}\r\n                />\r\n            )}\r\n        </div>\r\n      </Sider>\r\n      <Layout style={{ marginLeft: collapsed ? 80 : 250, transition: 'all 0.2s', background: 'transparent' }}>\r\n        <Header style={{ \r\n            padding: '0 24px', \r\n            background: 'rgba(5, 5, 5, 0.5)', /* Slight backdrop for readability */\r\n            backdropFilter: 'blur(10px)',\r\n            borderBottom: '1px solid rgba(255, 255, 255, 0.08)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'space-between',\r\n            position: 'sticky',\r\n            top: 0,\r\n            zIndex: 99,\r\n            width: '100%'\r\n        }}>\r\n          <Space>\r\n            <Button\r\n                type=\"text\"\r\n                icon={collapsed ? <MenuUnfoldOutlined /> : <MenuFoldOutlined />}\r\n                onClick={() => setCollapsed(!collapsed)}\r\n                style={{\r\n                fontSize: '16px',\r\n                width: 64,\r\n                height: 64,\r\n                color: 'white'\r\n                }}\r\n            />\r\n            <Title level={4} style={{ margin: 0, color: 'white', fontFamily: 'var(--font-outfit)' }}>\r\n                {pathname === '/admin' ? 'Dashboard' : pathname.split('/').pop()?.charAt(0).toUpperCase()! + pathname.split('/').pop()?.slice(1)!}\r\n            </Title>\r\n          </Space>\r\n          <Space size=\"large\">\r\n            <div style={{ textAlign: 'right', lineHeight: '1.2' }}>\r\n                <Text strong style={{ color: 'white', display: 'block' }}>{user?.name || 'User'}</Text>\r\n                <Text type=\"secondary\" style={{ fontSize: 12, color: '#a1a1aa' }}>{user?.email}</Text>\r\n            </div>\r\n            <Dropdown menu={userMenu} placement=\"bottomRight\">\r\n                <Avatar size=\"large\" icon={<UserOutlined />} style={{ backgroundColor: '#8b5cf6', cursor: 'pointer' }} />\r\n            </Dropdown>\r\n          </Space>\r\n        </Header>\r\n        <Content\r\n          style={{\r\n            padding: 24,\r\n            minHeight: 280,\r\n            background: 'transparent',\r\n          }}\r\n        >\r\n          {children}\r\n        </Content>\r\n      </Layout>\r\n    </Layout>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;;;AAfA;;;;;;AAiBA,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,+LAAM;AACzC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,2MAAU;AAEnB,SAAS,gBAAgB,EACtC,QAAQ,EAGT;;IACC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAuD;IACvF,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,WAAW,IAAA,oJAAW;IAE5B,IAAA,0KAAS;qCAAC;YACR,eAAe;gBACb,IAAI;oBACF,MAAM,MAAM,MAAM,MAAM;oBACxB,IAAI,IAAI,EAAE,EAAE;wBACV,MAAM,OAAO,MAAM,IAAI,IAAI;wBAC3B,QAAQ,KAAK,IAAI;oBACnB,OAAO;wBACJ,qCAAqC;wBACrC,OAAO,IAAI,CAAC;oBACf;gBACF,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,wBAAwB;gBACxC,SAAU;oBACR,WAAW;gBACb;YACF;YACA;QACF;oCAAG;QAAC;KAAO;IAEX,MAAM,YAAY;QAChB;YACE,KAAK;YACL,oBAAM,6LAAC,oPAAiB;;;;;YACxB,qBAAO,6LAAC,0KAAI;gBAAC,MAAM,MAAM,SAAS,UAAU,WAAW;0BAAc;;;;;;YACrE,WAAW,CAAC,0BAA0B,EAAE,aAAa,YAAY,aAAa,eAAe,eAAe,IAAI;YAChH,OAAO;gBAAE,QAAQ;gBAAS,cAAc;YAAE;QAC5C;WAEI,MAAM,SAAS,UAAU;YACzB;gBACI,KAAK;gBACL,oBAAM,6LAAC,qOAAY;;;;;gBACnB,qBAAO,6LAAC,0KAAI;oBAAC,MAAK;8BAAe;;;;;;gBACjC,WAAW,CAAC,0BAA0B,EAAE,aAAa,iBAAiB,eAAe,IAAI;gBACzF,OAAO;oBAAE,QAAQ;oBAAS,cAAc;gBAAE;YAC9C;YACA;gBACE,KAAK;gBACL,oBAAM,6LAAC,8OAAe;;;;;gBACtB,qBAAO,6LAAC,0KAAI;oBAAC,MAAK;8BAAY;;;;;;gBAC9B,WAAW,CAAC,0BAA0B,EAAE,aAAa,cAAc,eAAe,IAAI;gBACtF,OAAO;oBAAE,QAAQ;oBAAS,cAAc;gBAAE;YAC5C;SACH,GAAG,EAAE;KACP;IAED,MAAM,kBAAkB,CAAC,EAAE,GAAG,EAAmB;QAC7C,kEAAkE;QAClE,IAAI,OAAO,CAAC,IAAI,UAAU,CAAC,MAAM,QAAQ,iCAAiC;IAC1E,4CAA4C;IAChD;IAEA,MAAM,eAAe;QACnB,SAAS,MAAM,GAAG;QAClB,OAAO,IAAI,CAAC;IACd;IAEA,MAAM,WAAW;QACb,OAAO;YACH;gBACI,KAAK;gBACL,OAAO;gBACP,oBAAM,6LAAC,2OAAc;;;;;gBACrB,SAAS;YACb;SACH;IACL;IAEA,IAAI,SAAS;QACT,qBACI,6LAAC;YAAI,OAAO;gBAAE,QAAQ;gBAAS,SAAS;gBAAQ,gBAAgB;gBAAU,YAAY;gBAAU,YAAY;YAAU;sBAClH,cAAA,6LAAC,4MAAK;gBAAC,aAAY;gBAAW,OAAM;;kCAChC,6LAAC,yLAAI;wBAAC,MAAK;;;;;;kCACX,6LAAC;wBAAI,OAAO;4BAAE,OAAO;4BAAW,WAAW;4BAAI,YAAY;wBAAI;kCAAG;;;;;;;;;;;;;;;;;IAIlF;IAEA,qBACE,6LAAC,+LAAM;QAAC,OAAO;YAAE,WAAW;YAAS,YAAY;QAAc;;0BAC7D,6LAAC;gBACC,SAAS;gBACT,WAAW;gBACX,WAAW;gBACX,OAAO;gBACP,OAAO;oBACH,YAAY;oBACZ,aAAa;oBACb,UAAU;oBACV,QAAQ;oBACR,MAAM;oBACN,QAAQ;gBACZ;;kCAEA,6LAAC;wBAAI,OAAO;4BACR,QAAQ;4BACR,SAAS;4BACT,YAAY;4BACZ,gBAAgB,YAAY,WAAW;4BACvC,SAAS,YAAY,IAAI;4BACzB,cAAc;wBAClB;;0CACI,6LAAC,2OAAc;gCAAC,OAAO;oCAAE,UAAU;oCAAI,OAAO;gCAAU;;;;;;4BACvD,CAAC,2BACE,6LAAC;gCAAM,OAAO;gCAAG,OAAO;oCAAE,QAAQ;oCAAc,OAAO;oCAAS,YAAY;oCAAK,YAAY;gCAAqB;0CAAG;;;;;;;;;;;;kCAK7H,6LAAC,yLAAI;wBACH,OAAM;wBACN,MAAK;wBACL,cAAc;4BAAC;yBAAS;wBACxB,OAAO;4BAAE,YAAY;4BAAe,aAAa;4BAAG,WAAW;wBAAG;wBAClE,OAAO;wBACP,SAAS;;;;;;kCAEX,6LAAC;wBAAI,OAAO;4BAAE,UAAU;4BAAY,QAAQ;4BAAI,OAAO;4BAAQ,SAAS;wBAAS;kCAC5E,CAAC,0BACE,6LAAC,+MAAM;4BACH,MAAK;4BACL,oBAAM,6LAAC,2OAAc;;;;;4BACrB,SAAS;4BACT,OAAO;gCAAE,OAAO;gCAAW,OAAO;gCAAQ,WAAW;gCAAQ,aAAa;4BAAE;sCAC/E;;;;;iDAID,6LAAC,+MAAM;4BACH,MAAK;4BACL,oBAAM,6LAAC,2OAAc;;;;;4BACrB,SAAS;4BACT,OAAO;gCAAE,OAAO;gCAAW,OAAO;gCAAQ,SAAS;gCAAQ,gBAAgB;4BAAS;;;;;;;;;;;;;;;;;0BAKlG,6LAAC,+LAAM;gBAAC,OAAO;oBAAE,YAAY,YAAY,KAAK;oBAAK,YAAY;oBAAY,YAAY;gBAAc;;kCACnG,6LAAC;wBAAO,OAAO;4BACX,SAAS;4BACT,YAAY;4BAAsB,mCAAmC,GACrE,gBAAgB;4BAChB,cAAc;4BACd,SAAS;4BACT,YAAY;4BACZ,gBAAgB;4BAChB,UAAU;4BACV,KAAK;4BACL,QAAQ;4BACR,OAAO;wBACX;;0CACE,6LAAC,4MAAK;;kDACJ,6LAAC,+MAAM;wCACH,MAAK;wCACL,MAAM,0BAAY,6LAAC,uPAAkB;;;;mEAAM,6LAAC,iPAAgB;;;;;wCAC5D,SAAS,IAAM,aAAa,CAAC;wCAC7B,OAAO;4CACP,UAAU;4CACV,OAAO;4CACP,QAAQ;4CACR,OAAO;wCACP;;;;;;kDAEJ,6LAAC;wCAAM,OAAO;wCAAG,OAAO;4CAAE,QAAQ;4CAAG,OAAO;4CAAS,YAAY;wCAAqB;kDACjF,aAAa,WAAW,cAAc,SAAS,KAAK,CAAC,KAAK,GAAG,IAAI,OAAO,GAAG,gBAAiB,SAAS,KAAK,CAAC,KAAK,GAAG,IAAI,MAAM;;;;;;;;;;;;0CAGpI,6LAAC,4MAAK;gCAAC,MAAK;;kDACV,6LAAC;wCAAI,OAAO;4CAAE,WAAW;4CAAS,YAAY;wCAAM;;0DAChD,6LAAC;gDAAK,MAAM;gDAAC,OAAO;oDAAE,OAAO;oDAAS,SAAS;gDAAQ;0DAAI,MAAM,QAAQ;;;;;;0DACzE,6LAAC;gDAAK,MAAK;gDAAY,OAAO;oDAAE,UAAU;oDAAI,OAAO;gDAAU;0DAAI,MAAM;;;;;;;;;;;;kDAE7E,6LAAC,qMAAQ;wCAAC,MAAM;wCAAU,WAAU;kDAChC,cAAA,6LAAC,+LAAM;4CAAC,MAAK;4CAAQ,oBAAM,6LAAC,qOAAY;;;;;4CAAK,OAAO;gDAAE,iBAAiB;gDAAW,QAAQ;4CAAU;;;;;;;;;;;;;;;;;;;;;;;kCAI5G,6LAAC;wBACC,OAAO;4BACL,SAAS;4BACT,WAAW;4BACX,YAAY;wBACd;kCAEC;;;;;;;;;;;;;;;;;;AAKX;GA1MwB;;QAQP,kJAAS;QACP,oJAAW;;;KATN"}}]
}