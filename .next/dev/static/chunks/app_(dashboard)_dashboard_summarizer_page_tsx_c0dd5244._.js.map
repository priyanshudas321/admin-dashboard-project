{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/vs%20code/antigravity%20related%20test%20projects/react%20dashboard%20project/admin-dashboard-type2/app/%28dashboard%29/dashboard/summarizer/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { Card, Input, Button, Typography, Space, Spin, Divider, App, Alert } from 'antd';\r\nimport { YoutubeOutlined, RobotOutlined, CopyOutlined } from '@ant-design/icons';\r\nimport ReactMarkdown from 'react-markdown';\r\n\r\nconst { Title, Paragraph, Text } = Typography;\r\nconst { TextArea } = Input;\r\n\r\nexport default function SummarizerPage() {\r\n  const { message } = App.useApp();\r\n  const [url, setUrl] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [result, setResult] = useState<{\r\n      title: string;\r\n      videoId: string;\r\n      notes: string;\r\n      isFallback: boolean;\r\n  } | null>(null);\r\n  const [error, setError] = useState('');\r\n\r\n  const handleSummarize = async () => {\r\n    if (!url) {\r\n      message.error('Please enter a YouTube URL');\r\n      return;\r\n    }\r\n\r\n    // Basic client-side validation, but let backend handle strict extraction\r\n    const videoIdMatch = url.match(/(?:youtube\\.com\\/(?:[^\\/]+\\/.+\\/|(?:v|e(?:mbed)?)\\/|.*[?&]v=)|youtu\\.be\\/)([^\"&?\\/\\s]{11})/);\r\n    // If not a standard URL, maybe it's just the ID or we let backend fail it\r\n    \r\n    setLoading(true);\r\n    setError('');\r\n    setResult(null);\r\n\r\n    try {\r\n      // Send URL directly, backend handles extraction\r\n      const res = await fetch('/api/summarize', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ url }), // Send 'url' as source robust backend expects\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (!res.ok) {\r\n        throw new Error(data.error || 'Failed to generate summary');\r\n      }\r\n\r\n      setResult(data);\r\n      message.success('Summary generated successfully!');\r\n    } catch (err: any) {\r\n      const msg = err.message || 'An error occurred';\r\n      setError(msg);\r\n      message.error(msg);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const copyToClipboard = () => {\r\n    if (result?.notes) {\r\n      navigator.clipboard.writeText(result.notes);\r\n      message.success('Copied to clipboard!');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ maxWidth: 800, margin: '0 auto' }}>\r\n      <Space orientation=\"vertical\" size=\"large\" style={{ width: '100%' }}>\r\n        <div style={{ textAlign: 'center', marginBottom: 24 }}>\r\n          <Title level={2} style={{ color: 'white', marginBottom: 8 }}>\r\n            <RobotOutlined style={{ color: '#8b5cf6', marginRight: 12 }} />\r\n            AI YouTube Summarizer\r\n          </Title>\r\n          <Paragraph style={{ color: '#a1a1aa', fontSize: 16 }}>\r\n            Paste a YouTube link to get structured study notes instantly.\r\n          </Paragraph>\r\n        </div>\r\n\r\n        <Card \r\n          className=\"glass-card\" \r\n          style={{ \r\n            background: 'rgba(255, 255, 255, 0.05)', \r\n            border: '1px solid rgba(255, 255, 255, 0.1)',\r\n            backdropFilter: 'blur(10px)'\r\n          }}\r\n        >\r\n          <Space orientation=\"vertical\" size=\"middle\" style={{ width: '100%' }}>\r\n            <Text strong style={{ color: '#e4e4e7' }}>YouTube Video URL</Text>\r\n            <Input \r\n              prefix={<YoutubeOutlined style={{ color: '#ff0000' }} />} \r\n              placeholder=\"https://www.youtube.com/watch?v=...\" \r\n              value={url}\r\n              onChange={(e) => setUrl(e.target.value)}\r\n              size=\"large\"\r\n              style={{ background: 'rgba(0,0,0,0.2)', border: '1px solid #3f3f46', color: 'white' }}\r\n              onPressEnter={handleSummarize}\r\n            />\r\n\r\n            {/* Video Preview */}\r\n            {(() => {\r\n              const videoIdMatch = url.match(/(?:youtube\\.com\\/(?:[^\\/]+\\/.+\\/|(?:v|e(?:mbed)?)\\/|.*[?&]v=)|youtu\\.be\\/)([^\"&?\\/\\s]{11})/);\r\n              const videoId = videoIdMatch ? videoIdMatch[1] : (result?.videoId || null);\r\n\r\n              if (videoId) {\r\n                return (\r\n                  <div className=\"animate-fade-up\" style={{ width: '100%', aspectRatio: '16/9', borderRadius: 12, overflow: 'hidden', border: '1px solid rgba(255, 255, 255, 0.1)' }}>\r\n                    <iframe\r\n                      width=\"100%\"\r\n                      height=\"100%\"\r\n                      src={`https://www.youtube.com/embed/${videoId}`}\r\n                      title=\"YouTube video player\"\r\n                      frameBorder=\"0\"\r\n                      allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n                      allowFullScreen\r\n                    />\r\n                  </div>\r\n                );\r\n              }\r\n              return null;\r\n            })()}\r\n\r\n            <Button \r\n              type=\"primary\" \r\n              onClick={handleSummarize} \r\n              loading={loading}\r\n              size=\"large\"\r\n              block\r\n              style={{ \r\n                background: 'linear-gradient(90deg, #8b5cf6 0%, #ec4899 100%)', \r\n                border: 'none',\r\n                height: 48,\r\n                fontWeight: 600,\r\n                fontSize: 16\r\n              }}\r\n            >\r\n              {loading ? 'Generating Study Notes...' : 'Generate Study Notes'}\r\n            </Button>\r\n          </Space>\r\n        </Card>\r\n\r\n        {result && (\r\n          <div className=\"animate-fade-up\">\r\n            \r\n            {result.isFallback && (\r\n               <Alert\r\n                  message=\"Video Transcript Restricted\"\r\n                  description=\"Exact transcript unavailable. These notes are generated based on the video title and description using AI knowledge.\"\r\n                  type=\"warning\"\r\n                  showIcon\r\n                  style={{ marginBottom: 24, background: 'rgba(250, 173, 20, 0.1)', border: '1px solid rgba(250, 173, 20, 0.3)', color: '#faad14' }}\r\n               />\r\n            )}\r\n\r\n            <Card \r\n              style={{ \r\n                background: 'rgba(255, 255, 255, 0.05)', \r\n                border: '1px solid rgba(255, 255, 255, 0.1)',\r\n              }}\r\n              extra={\r\n                <Button \r\n                  type=\"text\" \r\n                  icon={<CopyOutlined />} \r\n                  onClick={copyToClipboard}\r\n                  style={{ color: '#a1a1aa' }}\r\n                >\r\n                  Copy\r\n                </Button>\r\n              }\r\n              title={<span style={{ color: 'white' }}>{result.title} - Study Notes</span>}\r\n            >\r\n              <div className=\"markdown-content\" style={{ color: '#e4e4e7', lineHeight: 1.6 }}>\r\n                <ReactMarkdown \r\n                    components={{\r\n                        h2: ({node, ...props}) => <h2 style={{color: '#a78bfa', marginTop: '1.5em', borderBottom: '1px solid rgba(255,255,255,0.1)', paddingBottom: '0.5em'}} {...props} />,\r\n                        h3: ({node, ...props}) => <h3 style={{color: '#38bdf8', marginTop: '1em'}} {...props} />,\r\n                        strong: ({node, ...props}) => <strong style={{color: '#f472b6'}} {...props} />,\r\n                        ul: ({node, ...props}) => <ul style={{paddingLeft: '1.5em'}} {...props} />,\r\n                        li: ({node, ...props}) => <li style={{marginBottom: '0.5em'}} {...props} />,\r\n                    }}\r\n                >\r\n                    {result.notes}\r\n                </ReactMarkdown>\r\n              </div>\r\n            </Card>\r\n          </div>\r\n        )}\r\n      </Space>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}